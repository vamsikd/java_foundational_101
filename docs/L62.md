# L62: Runnable — differences from Thread, uses, rules, and best practices

Runnable represents a unit of work (a task) with a single method `run()`. It does not provide thread lifecycle controls — that’s the job of `Thread` (or higher-level executors). Prefer designing your code around tasks (Runnable) instead of hardwiring to threads.

## 1) Runnable vs Thread
- Thread = execution mechanism (start, join, interrupt, name, priority).
- Runnable = task definition (what to run), can be executed by any thread.
- Prefer `Runnable` (or `Callable`) for flexibility, testing, and reuse.

Example creation styles:
- Extend `Thread` and override `run()` — simple but couples concerns.
- Implement `Runnable` and pass to `new Thread(r, name)` — preferred.
- Use lambda for concise `Runnable` instances.

See: `L62_runnable/RunnableDemo.java` (method `runnableVsThread`).

## 2) Uses and Use Cases
- Decouple tasks from execution to swap strategies (single thread, pool).
- Reuse stateless tasks across multiple threads.
- Compose tasks into pipelines, schedule later with executors.
- Improve testability: run `run()` on the same thread in tests.

## 3) Rules to Follow
- Don’t call `run()` to start threads; use `new Thread(r).start()`.
- Keep `run()` short and focused; avoid long blocking when possible.
- If `run()` may sleep or block, handle `InterruptedException` properly.
- Avoid capturing mutable shared state in lambdas without synchronization.
- Name threads for easier diagnostics: `new Thread(r, "Worker-1")`.

## 4) Best Practices & Guidelines
- Prefer higher-level APIs (`ExecutorService`, `CompletableFuture`) in real apps.
- Make runnables stateless or confine state to the thread.
- Use synchronized/locks/atomics for shared counters or flags.
- For return values, prefer `Callable<V>` and `Future<V>` over side effects.
- For repeated scheduling, use `ScheduledExecutorService` (next lesson).

## 5) Try it
Compile and run this lesson:
```pwsh
javac .\L62_runnable\RunnableDemo.java
java L62_runnable.RunnableDemo
```

Expected output (order of thread prints may vary):
```
=== L62: Runnable Demo ===
-- Runnable vs Thread --
[WorkerThread] running on Extender-1
[PrintTask] running on Runnable-1
[LambdaTask] running on Runnable-2
-- Reuse a stateless Runnable & name threads --
[HelloTask] hi from User-1
[HelloTask] hi from User-2
-- Shared state: race vs synchronized --
[Unsafe] expected=10000, actual=<less than 10000>
[Safe] expected=10000, actual=10000
-- Interrupt handling with Runnable --
[SleepyTask] going to sleep
[SleepyTask] interrupted
[main] interrupt demo done
=== End of Runnable Demo ===
```

Source: `L62_runnable/RunnableDemo.java`.
