# L25: Maps — implementations, HashMap with generics, rules, and best practices

Maps associate keys to values. Choose the implementation by ordering needs and operation costs.

## 1) Implementations of Map
- HashMap — general-purpose, no order; allows one null key and many null values
- LinkedHashMap — preserves insertion order (or access order with special constructor)
- TreeMap — sorted keys (natural/comparator); navigable operations; no null keys with natural order

## 2) HashMap + Generics
Use `Map<K,V>` with a `HashMap<>()` for most cases. Generics help with compile-time type safety.

In `L25_map/MapsDemo.java`:
- `put`, `get`, `containsKey`, `putIfAbsent`, `getOrDefault`
- Iterating entries via `entrySet`
- Note on null supports

## 3) Rules to Follow
- Keys must honor `equals` and `hashCode` consistently.
- Avoid mutating key fields used in equality once inserted.
- Prefer `LinkedHashMap` when stable iteration order matters.
- Prefer `TreeMap` for sorted key views and range queries.

## 4) Best Practices
- Use `computeIfAbsent`/`merge` for succinct counters and aggregations.
- Use immutable keys when possible.
- For case-insensitive keys, normalize the key or use a `Comparator` (TreeMap) or a wrapper.

## 5) Try it
Compile and run:
```pwsh
javac .\L25_map\MapsDemo.java
java L25_map.MapsDemo
```

Expected output (abridged):
```
=== L25: Map Demo ===
-- Implementations overview --
-- HashMap with generics --
Scores size=4, bob=82
Contains key 'dave'? false
HashMap keys (order not guaranteed): [...]
-- Common operations --
Canada capital: Unknown
After putIfAbsent: {India=New Delhi, Japan=Tokyo, USA=Washington DC, France=Paris}
Entries: India->New Delhi Japan->Tokyo USA->Washington DC France->Paris 
After remove 'USA': {India=New Delhi, Japan=Tokyo, France=Paris}
-- LinkedHashMap order --
Insertion order: {first=1, second=2, third=3}
-- TreeMap sorted keys --
TreeMap (CI order): {apple=2, Banana=1, cherry=3}
firstKey=apple, ceiling('b')=Banana
-- computeIfAbsent / merge --
Word frequencies: {to=2, be=2, or=1, not=1}
-- Key equality pitfall --
Before mutate: get(k)=answer
After mutate: get(k)=null (likely null)
ContainsKey(new Key('42'))? true
=== End of Map Demo ===
```

Source: `L25_map/MapsDemo.java`.
